<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="Guowei Lv">
<meta name="generator" content="Hugo 0.25.1" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://lvguowei.me/css/style.css" type="text/css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type="text/css">
<link rel="alternate" href="http://lvguowei.me/index.xml" type="application/rss+xml" title="Guowei Lv">
<title>Programming Kata Day 13 - Guowei Lv</title>
</head>
<body>

<header>
  <div class="container clearfix">
    <a class="path" href="http://lvguowei.me/">[Guowei Lv]</a>
    <span class="caret"># _</span>
    <div class="right">
      
    </div>
  </div>
</header>

<div class="container">


<main role="main" class="article">
  
<article class="single" itemscope itemtype="http://schema.org/BlogPosting">
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-03-06">March 06, 2017</time></span>


    <span class="key">in</span>
    <span class="val">

        <a href="http://lvguowei.me/categories/programming">programming</a>

    </span>


    <br>
    <span class="key">tags:</span>
    <span class="val">

        <a href="http://lvguowei.me/tags/clojure">clojure</a>

        <a href="http://lvguowei.me/tags/programming-kata">programming kata</a>

    </span>

  </div>
  <h1 class="headline" itemprop="headline">Programming Kata Day 13</h1>
  <section class="body" itemprop="articleBody">
    

<h1 id="problem">Problem</h1>

<p>The elevator can be on first floor or second floor
The elevator can be either openned or closed.
The elevator can go up or down. But when it goes up or down, the door has to be closed.
The door can open or close, but it cannot open when it is already openned or close when it is already closed.</p>

<p>Write a function that takes a list of actions with :done indicating the end, and return if this sequence is legal or not.</p>

<p>This example comes from The Joy of Clojure 2nd.</p>

<h1 id="solution">Solution</h1>

<div class="highlight"><pre><code class="language-clojure" data-lang="clojure"><span></span><span class="p">(</span><span class="kd">defn </span><span class="nv">elevator</span> <span class="p">[</span><span class="nv">commands</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">letfn</span> <span class="p">[(</span><span class="nf">ff-open</span> <span class="p">[[</span><span class="nv">_</span> <span class="o">&amp;</span> <span class="nv">r</span><span class="p">]]</span>
            <span class="o">#</span><span class="p">(</span><span class="nf">case</span> <span class="nv">_</span>
               <span class="ss">:close</span> <span class="p">(</span><span class="nf">ff-close</span> <span class="nv">r</span><span class="p">)</span>
               <span class="ss">:done</span> <span class="nv">true</span>
               <span class="nv">false</span><span class="p">))</span>
          <span class="p">(</span><span class="nf">ff-close</span> <span class="p">[[</span><span class="nv">_</span> <span class="o">&amp;</span> <span class="nv">r</span><span class="p">]]</span>
            <span class="o">#</span><span class="p">(</span><span class="nf">case</span> <span class="nv">_</span>
               <span class="ss">:open</span> <span class="p">(</span><span class="nf">ff-open</span> <span class="nv">r</span><span class="p">)</span>
               <span class="ss">:up</span> <span class="p">(</span><span class="nf">sf-close</span> <span class="nv">r</span><span class="p">)</span>
               <span class="nv">false</span><span class="p">))</span>
          <span class="p">(</span><span class="nf">sf-close</span> <span class="p">[[</span><span class="nv">_</span> <span class="o">&amp;</span> <span class="nv">r</span><span class="p">]]</span>
            <span class="o">#</span><span class="p">(</span><span class="nf">case</span> <span class="nv">_</span>
               <span class="ss">:open</span> <span class="p">(</span><span class="nf">sf-open</span> <span class="nv">r</span><span class="p">)</span>
               <span class="ss">:down</span> <span class="p">(</span><span class="nf">ff-close</span> <span class="nv">r</span><span class="p">)</span>
               <span class="nv">false</span><span class="p">))</span>
          <span class="p">(</span><span class="nf">sf-open</span> <span class="p">[[</span><span class="nv">_</span> <span class="o">&amp;</span> <span class="nv">r</span><span class="p">]]</span>
            <span class="o">#</span><span class="p">(</span><span class="nf">case</span> <span class="nv">_</span>
               <span class="ss">:close</span> <span class="p">(</span><span class="nf">sf-close</span> <span class="nv">r</span><span class="p">)</span>
               <span class="ss">:done</span> <span class="nv">true</span>
               <span class="nv">false</span><span class="p">))]</span>
    <span class="p">(</span><span class="nf">trampoline</span> <span class="nv">ff-open</span> <span class="nv">commands</span><span class="p">)))</span>
    
</code></pre></div>


  </section>

  <br/>

  <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "lvguoweime" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</article>

</main>


</div>
<footer>
  <div class="container">
    <span class="copyright">&copy; 2017  Guowei Lv</span>
  </div>
</footer>

</body>
</html>

