<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="Guowei Lv">
<meta name="generator" content="Hugo 0.25.1" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://lvguowei.me/css/style.css" type="text/css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type="text/css">
<link rel="alternate" href="http://lvguowei.me/index.xml" type="application/rss+xml" title="Guowei Lv">
<title>Master Mind in TDD - Guowei Lv</title>
</head>
<body>

<header>
  <div class="container clearfix">
    <a class="path" href="http://lvguowei.me/">[Guowei Lv]</a>
    <span class="caret"># _</span>
    <div class="right">
      
    </div>
  </div>
</header>

<div class="container">


<main role="main" class="article">
  
<article class="single" itemscope itemtype="http://schema.org/BlogPosting">
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2016-11-21">November 21, 2016</time></span>


    <span class="key">in</span>
    <span class="val">

        <a href="http://lvguowei.me/categories/programming">programming</a>

    </span>


    <br>
    <span class="key">tags:</span>
    <span class="val">

        <a href="http://lvguowei.me/tags/tdd">TDD</a>

        <a href="http://lvguowei.me/tags/mastermind">MasterMind</a>

        <a href="http://lvguowei.me/tags/uncle-bob">uncle bob</a>

        <a href="http://lvguowei.me/tags/java">java</a>

    </span>

  </div>
  <h1 class="headline" itemprop="headline">Master Mind in TDD</h1>
  <section class="body" itemprop="articleBody">
    <p>In one of Uncle Bob&rsquo;s video, he talked about this game called &ldquo;Master Mind&rdquo; when he was teaching Single Responsibility Principle(SRP).
After googled the game, turns out that it is actually a quite famous board game. For more information about the game, please look here -&gt; <a href="https://en.wikipedia.org/wiki/Mastermind_(board_game)">wiki</a>.</p>

<p>The game can be played by two people. One comes up with a code, the other one tries to guess. The one who comes up with the code has to score the guesser&rsquo;s guess based on some rules.
The rules are the following:</p>

<ol>
<li>For each exact match(the right char on the right position), give a <code>+</code>.</li>
<li>For each half match(the right char on the wrong position), give a <code>-</code>.</li>
</ol>

<p>For example, if the code is <code>ACBB</code> and the guess is <code>BCAF</code>, then the score would be <code>+--</code>. The <code>+</code> is for the <code>C</code>, and two <code>-</code> are for <code>B</code> and <code>A</code>.</p>

<p>After explaining how to play this game, Uncle Bob gives a architecture that looks like this.</p>


<figure >
    
        <img src="http://lvguowei.me/img/master-mind-1.jpg" />
    
    
</figure>


<p>This design shows that there are 3 <strong>actors</strong> in this program: <strong>Customer</strong>, <strong>Game Designer</strong> and <strong>Strategist</strong>. According to the Single Responsibility Principle, there will be one module for each actor. And the <em>Game Interface</em> module and <em>Strategy</em> module are dependent on <em>Game Play</em> module.</p>

<p>Here shows a more detailed design.</p>


<figure >
    
        <img src="http://lvguowei.me/img/master-mind-2.png" />
    
    
</figure>


<p>Let&rsquo;s use these as a reference and create some empty classes and interfaces.</p>

<p><a href="https://github.com/lvguowei/MasterMindTDD/commit/50bd61a8f9a7a4eb3d9fe63d1f2dc8da46c532a4">source code version 0</a></p>

<p>Since the center of the program is the game engine, let&rsquo;s implement enough <code>GameEngine</code> so that we can pass the test <code>gotItOnFirstGuess</code>.</p>

<p><a href="https://github.com/lvguowei/MasterMindTDD/commit/d72116eb3c870484c138e211cd7d0d0f6cee6d3f">source code version 1</a></p>

<p>And it&rsquo;s not very hard to pass the test of <code>gotItOnSecondGuess</code>.</p>

<p><a href="https://github.com/lvguowei/MasterMindTDD/commit/82fca579aab74908c16cd578499351e2d281cc7f">source code version 2</a></p>

<p>Then the test of <code>neverGetIt</code>.</p>

<p><a href="https://github.com/lvguowei/MasterMindTDD/commit/89a50b4965f83fcaf1132096d3164344695234c4">source code version 3</a></p>

<p>Now, let&rsquo;s write tests for the <code>Guesser</code>.
If all the guesses are invalid, the <code>nextGuess</code> should return null.</p>

<p><a href="https://github.com/lvguowei/MasterMindTDD/commit/bebf02418fe686953f09c1bf650284106e579871">source code version 4</a></p>

<p>If there is only one guess is valid, <code>nextGuess</code> should return that one and no more.</p>

<p><a href="https://github.com/lvguowei/MasterMindTDD/commit/8d0f621ad9acfa0bd05dab2fabd3b03d25a7ed2b">source code version 5</a></p>

<p>Next, test how the <code>Guesser</code> generate guesses.</p>

<p><a href="https://github.com/lvguowei/MasterMindTDD/commit/f8f7ce8a6e76be745ca135f0e5e087498e561fe6">source code version 6</a></p>

<p>Tests for the <code>Scorer</code>.</p>

<p><a href="https://github.com/lvguowei/MasterMindTDD/commit/4ef948e41c6d8e996435c72cd4aa3e795138cc77">source code version 7</a></p>

<p>Finally, tests for <code>RememberingGuessChecker</code>.
<a href="https://github.com/lvguowei/MasterMindTDD/commit/5e52719cb3324b0a10371dd52dfa522433a04780">source code version 8</a></p>

  </section>

  <br/>

  <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "lvguoweime" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</article>

</main>


</div>
<footer>
  <div class="container">
    <span class="copyright">&copy; 2016  Guowei Lv</span>
  </div>
</footer>

</body>
</html>

