<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="Guowei Lv">
<meta name="generator" content="Hugo 0.25" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://lvguowei.me/css/style.css" type="text/css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type="text/css">
<link rel="alternate" href="http://lvguowei.me/index.xml" type="application/rss+xml" title="Guowei Lv">
<title>Clojure - Guowei Lv</title>
</head>
<body>

<header>
  <div class="container clearfix">
    <a class="path" href="http://lvguowei.me/">[Guowei Lv]</a>
    <span class="caret"># _</span>
    <div class="right">
      
    </div>
  </div>
</header>

<div class="container">

<main role="main" class="article-list">
  <h1 class="list-title">Clojure</h1>
  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/understand-clojure-transducers/">Understand Clojure Transducers 1</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-04-02">April 02, 2017</time></span>

  </div>
  <section class="summary">
    In this post, we will define what is a transducer.
First, let&rsquo;s take a closer look at map.
(map inc [1 2 3])  A straightforward way to explain what has happened is this: Increment each item by one in a list.
At first thought, this sounds like one step operation.
Now let&rsquo;s change the requirement a bit. We want to increment each element by one and then sum them together.  <a href="http://lvguowei.me/post/understand-clojure-transducers/">Read More...</a>
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata-day-13/">Programming Kata Day 13</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-03-06">March 06, 2017</time></span>

  </div>
  <section class="summary">
    Problem The elevator can be on first floor or second floor The elevator can be either openned or closed. The elevator can go up or down. But when it goes up or down, the door has to be closed. The door can open or close, but it cannot open when it is already openned or close when it is already closed.
Write a function that takes a list of actions with :done indicating the end, and return if this sequence is legal or not.  <a href="http://lvguowei.me/post/programming-kata-day-13/">Read More...</a>
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/clojure-tail-recursion/">Clojure Tail Recursion</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-27">February 27, 2017</time></span>

  </div>
  <section class="summary">
    What this recur and tail calls optimization is all about in Clojure? This blog post is trying to give a short yet easy to remember explanation.
Before explaining anything, let&rsquo;s look at how we can implement + using recursion.
This is actually an interesting task, implement our +, since most of the time + is a built-in function. So to make things a bit more clear, let&rsquo;s assume that our computer is drunk and forgets about how to do +, but it still remembers how to increment and decrement by 1.  <a href="http://lvguowei.me/post/clojure-tail-recursion/">Read More...</a>
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata-day-12/">programming kata day 12</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-26">February 26, 2017</time></span>

  </div>
  <section class="summary">
     Problem Implement a unit converter that uses the given the following metric
(def metric {:meter 1 :km 1000 :cm 1/100 :mm [1/10 :cm]})  The converter should anwser questions like:
How many meters are there in 10 km and 20 cm?
Solution (defn convert [context descriptor] (reduce (fn [result [mag unit]] (let [val (metric unit)] (if (vector? val) (+ result (* mag (convert context val))) (+ result (* mag val))))) 0 (partition 2 descriptor))) (convert metric [1 :meter]) (convert metric [3 :km 10 :meter])   
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata-day-11/">programming kata day 11</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-25">February 25, 2017</time></span>

  </div>
  <section class="summary">
    Problem This coding adventure comes from Advend Of Code Day 2
Solution Github 
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/named-arguments-in-clojure/">Named Arguments In Clojure</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-24">February 24, 2017</time></span>

  </div>
  <section class="summary">
    Sometimes I miss the named arguments feature in Python, for example:
def slope(p1=(0,0), p2=(1,1)) return (float(p2[1] - p1[1])) / (p2[0] - p1[0]) =&gt; slope((1,2), (4,5)) =&gt; slope(p2=(2, 1))  The equivalent in clojure can be done using destructuring:
(defn slope [&amp; {:keys [p1 p2] :or {p1 [0 0] p2 [1 1]}}] (float (/ (- p2 1) (p1 1)) (- p2 0) (p1 0))) =&gt; (slope :p1 [1 2] :p2 [3 4]) =&gt; (slope :p2 [3 4]) =&gt; (slope)   
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata-day-10/">programming kata day 10</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-23">February 23, 2017</time></span>

  </div>
  <section class="summary">
    Problem Here is a list of students&rsquo; exam scores. Write a function to sort them based on given criteria. Like Math first, then Physics and then chemistry and then English.
(def exam-scores [{:math 78 :physics 80 :english 97 :chemistry 65} {:math 78 :physics 80 :english 66 :chemistry 65} {:math 78 :physics 54 :english 97 :chemistry 65} {:math 78 :physics 80 :english 97 :chemistry 61} {:math 100 :physics 89 :english 47 :chemistry 85} {:math 98 :physics 80 :english 79 :chemistry 65}])  Solution (defn rank [scores &amp; criteria] (reverse  (sort-by  (fn [score] (mapv score criteria)) scores)))  Note The sort-by in Clojure is very powerful, the idea is to reduce each row into one value that we know how to sort, like numbers, strings or lists.  <a href="http://lvguowei.me/post/programming-kata-day-10/">Read More...</a>
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata-day-9/">Programming Kata Day 9</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-20">February 20, 2017</time></span>

  </div>
  <section class="summary">
    Problem This coding adventure comes from Advend Of Code Day 1
Solution Github 
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata-day-8/">Programming Kata Day 8</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-18">February 18, 2017</time></span>

  </div>
  <section class="summary">
    Problem Write a function steps, that takes a sequence and makes a deeply nested structure from it:
(steps [1 2 3 4]) ;=&gt; [1 [2 [3 [4 []]]]]  Solution 1 (defn steps [s] (if (seq s) [(first s) (steps (rest s))] []))  Solution 2 Lazy version:
(defn lz-steps [s] (lazy-seq (if (seq s) [(first s) (lz-steps (rest s))] [])))  Note To see the difference, call the function like this:  <a href="http://lvguowei.me/post/programming-kata-day-8/">Read More...</a>
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata-day-7/">Programming Kata Day 7</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-17">February 17, 2017</time></span>

  </div>
  <section class="summary">
    Problem Suppose a binary tree structure looks like this:
{:val value :L &lt;left-node&gt; :R &lt;right-node&gt;}  Write a function to balance insert node into the tree.
Solution (defn insert [tree x] (cond (nil? tree) {:val x :L nil :R nil} (&lt; x (:val tree)) (assoc tree :L (insert (:L tree) x)) :else (assoc tree :R (insert (:R tree) x))))  Note Here is the function to traverse the tree:  <a href="http://lvguowei.me/post/programming-kata-day-7/">Read More...</a>
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata-day-6/">Programming Kata Day 6</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-15">February 15, 2017</time></span>

  </div>
  <section class="summary">
    Problem Write a function to determine if a vector contains a set of items.
Solution (defn containsv [v &amp; items] (some (set items) v))  Note Using a set as the predicate supplied to some allows you to check whether any of the truthy values in the set are contained within the given sequence. This is a frequently used Clojure idiom for searching for containment within a sequence. 
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata-day-5/">programming kata day 5</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-13">February 13, 2017</time></span>

  </div>
  <section class="summary">
    Problem Write a function to determine if a number is a triangular number.
Solutions Solution 1 (defn nth-triangle [n] (apply + (range (inc n)))) (defn is-triangle-number [n] (loop [i 0] (cond (&gt; n (nth-triangle i)) (recur (inc i)) (= n (nth-triangle i)) true :else false)))  Solution 2 (defn is-triangle-number [n] (loop [tri 0 i 1] (cond (&gt; n tri) (recur (+ tri i) (inc i)) (= n tri) true :else false)))  Note Solution 1 is the first that came to my mind, but it has a typical problem: redundant calculation.  <a href="http://lvguowei.me/post/programming-kata-day-5/">Read More...</a>
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/perfume-shop-puzzle/">Perfume Shop Puzzle</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-12">February 12, 2017</time></span>

  </div>
  <section class="summary">
    Solving hard puzzle programming challenges with logic programming is real fun. I solved one puzzle called &ldquo;Perfume Shop Puzzle&rdquo; by using the core.logic in Clojure. Check it out here: github. 
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata-day-4/">Programming Kata Day 4</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-12">February 12, 2017</time></span>

  </div>
  <section class="summary">
     Problem Implement take-nth.
Solutions Solution 1 (defn my-take-nth [n col] (loop [i 0 result []] (if (= i (count col)) result (if (= 0 (mod i n)) (recur (inc i) (conj result (nth col i))) (recur (inc i) result)))))  solution 2 (defn my-take-nth2 [n col] (-&gt;&gt; col (map-indexed (fn [i x] [i x])) (filter (fn [[i x]] (= 0 (mod i 2)))) (mapv (fn [[i x]] x))))   
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata-day-3/">programming kata day 3</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-10">February 10, 2017</time></span>

  </div>
  <section class="summary">
     Problem Trolls are attacking your comment section!
A common way to deal with this situation is to remove all of the vowels from the trolls&rsquo; comments, neutralizing the threat.
Your task is to write a function that takes a string and return a new string with all vowels removed.
For example, the string &ldquo;This website is for losers LOL!&rdquo; would become &ldquo;Ths wbst s fr lsrs LL!&rdquo;.
Solution Solution 1 (defn disemvowel [string] (reduce (fn [result next] (if (#{\A \E \I \O \U \a \e \i \o \u} next) result (str result next))) &quot;&quot; string))  Solution 2 (defn disemvowel [string] (apply str (remove (set &quot;AEIOUaeiou&quot;) string)))   
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata-day-2/">Programming Kata Day 2</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-07">February 07, 2017</time></span>

  </div>
  <section class="summary">
    Problem: Write a function to calculate fibonacci number in constant space complexity.
(defn fib [n] (loop [a 0 b 1 i n] (if (= 0 i) a (recur b (+ a b) (dec i)))))   
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/programming-kata/">Programming Kata</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-06">February 06, 2017</time></span>

  </div>
  <section class="summary">
    From today, I will practice one programming kata per day and post the content here.
Here goes the first one:
 My friend John likes to go to the cinema. He can choose between system A and system B.
System A : buy a ticket (15 dollars) every time
System B : buy a card (500 dollars) and every time buy a ticket the price of which is 0.90 times the price he paid for the previous one.  <a href="http://lvguowei.me/post/programming-kata/">Read More...</a>
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/nested-for-loops-in-clojure/">Nested For Loops in Clojure</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-02-03">February 03, 2017</time></span>

  </div>
  <section class="summary">
    One awkwardness I haven&rsquo;t really get rid of when using Clojure is for loops. Especially nested for loops that modifies some global variables. I find some solutions online where people use nested recursion or atoms, but can we just use one level of recursion? Let&rsquo;s try out with a coding kata.
Problem: Given an array of numbers, find the biggest sum of any two numbers. The same item in array cannot be used twice.  <a href="http://lvguowei.me/post/nested-for-loops-in-clojure/">Read More...</a>
  </section>
</article>

  
    
<article class="list-item" itemscope itemtype="http://schema.org/Blog">
  <h2 class="headline" itemprop="headline"><a href="http://lvguowei.me/post/why-component-dependency-cycle-is-bad/">Why component dependency cycle is bad</a></h2>
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2017-01-01">January 01, 2017</time></span>

  </div>
  <section class="summary">
    I have been working on some Clojure project at work for several months now, one little thing bothers me now and then is that it doesn&rsquo;t allow dependency cycle in project. For example if a.clj requires b.clj, b.clj requires c.clj, then c.clj cannot require a.clj, in other words, c.clj cannot use anything inside a.clj.
At first, I thought this is a bit odd, java doesn&rsquo;t have that. And once in a while we have to solve such problems by creating a new namespace and move the common function into it.  <a href="http://lvguowei.me/post/why-component-dependency-cycle-is-bad/">Read More...</a>
  </section>
</article>

  
</main>

</div>
<footer>
  <div class="container">
    <span class="copyright">&copy; 2017  Guowei Lv</span>
  </div>
</footer>

</body>
</html>

